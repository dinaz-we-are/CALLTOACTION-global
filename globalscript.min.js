async function initializeScripts(){await loadGSAP(),await loadAdditionalScripts(),initializeMainFunctions()}async function loadGSAP(){await Promise.all(["https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js","https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js","https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/Flip.min.js","https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollToPlugin.min.js","https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/Observer.min.js"].map((e=>loadScript(e))))}async function loadAdditionalScripts(){await Promise.all(["https://unpkg.com/split-type","https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"].map((e=>loadScript(e))))}function loadScript(e){return new Promise(((t,o)=>{if(document.querySelector(`script[src="${e}"]`))t();else{const a=document.createElement("script");a.src=e,a.async=!0,a.onload=t,a.onerror=o,document.head.appendChild(a)}}))}function initializeMainFunctions(){gsap.registerPlugin(ScrollTrigger,Flip,ScrollToPlugin,Observer),gsap.set(".menu-container",{x:"-100vw",opacity:0}),gsap.set(".menu-wrapper-row",{width:0}),window.addEventListener("resize",debounce((()=>ScrollTrigger.refresh()),200)),burgerAnimation(),changeLogoColor(),dataColor(),initializeScrollControlButtons(),initializeHoverAnimations(),initializeSimpleHoverTouchAnimations(),ctaAnimations(),info(),"function"==typeof pageSpecificFunctions&&pageSpecificFunctions()}function debounce(e,t){let o;return function(...a){clearTimeout(o),o=setTimeout((()=>e.apply(this,a)),t)}}function initializeGSAPAnimations(){const e=gsap.timeline({onComplete:()=>document.getElementById("cover-div").remove()});new SplitType(".h1-usp",{types:"words",tagName:"span"}),new SplitType(".brand-nav-hero",{types:"chars",tagName:"span"}),new SplitType(".usp",{types:"words",tagName:"span"});e.to("#cover-div",{opacity:0,duration:.025}).to(".wrapper-hero",{opacity:1,duration:.025},"<").fromTo(".brand-nav-hero .char",{y:"-10rem"},{y:0,duration:.5,ease:"back.out(1.7)",stagger:.05}).fromTo(".h1-usp .word",{opacity:0,y:50},{opacity:1,y:0,duration:.5,ease:"back.out(1.7)",stagger:.0325}).fromTo(".usp .word",{rotationX:90,transformOrigin:"bottom center"},{rotationX:0,duration:.5,ease:"back.out(1.7)",stagger:{amount:.3}},"<").fromTo("#nav",{opacity:0,y:"-5rem"},{delay:.5,opacity:1,y:"0",duration:.5,ease:"back.out(1.7)"},"<").fromTo("#big-call",{opacity:0},{opacity:1,ease:"linear",duration:1},"<").fromTo(".heading-container",{x:"50vw",opacity:0},{x:"0",opacity:1,duration:.5,ease:"power2"},"<").to(":root",{duration:1,"--linear-grad1":"#f06","--linear-grad2":"#e0ff0d",ease:"linear"},"<").fromTo("#arrow",{opacity:0},{opacity:1,duration:1,ease:"bounce"},"<"),e.call((function(){console.log("Animazione completata")}))}function arrowAnima(){let e=gsap.to("#arrow",{scale:.5,ease:"power1",duration:2,repeat:-1,yoyo:!0});ScrollTrigger.create({trigger:".hero-spacer",start:"top bottom",end:"top 90%",scrub:!0,onEnter:()=>{e.pause()},onLeaveBack:()=>{e.play()}}),e.play()}function initializeScrollFlipAnimations(){function e(e,t){const o=typeof e;return"string"!=typeof t||""===t.trim()?e:"true"===t&&"boolean"===o||("false"!==t||"boolean"!==o)&&(isNaN(t)&&"string"===o?t:isNaN(t)||"number"!==o?e:+t)}$("[tr-scrollflip-element='component']").each((function(t){let o,a=$(this),r=a.find("[tr-scrollflip-element='origin']"),n=a.find("[tr-scrollflip-element='target']"),i=a.find("[tr-scrollflip-scrubstart]"),c=a.find("[tr-scrollflip-scrubend]"),s=e("top top",i.attr("tr-scrollflip-scrubstart")),l=e("bottom bottom",c.attr("tr-scrollflip-scrubend")),d=e(0,a.attr("tr-scrollflip-staggerspeed")),u=e("start",a.attr("tr-scrollflip-staggerdirection")),p=e(!1,a.attr("tr-scrollflip-scale")),g=e(0,a.attr("tr-scrollflip-breakpoint"));function m(){o&&(o.kill(),gsap.set(n,{clearProps:"all"})),$("body").addClass("scrollflip-relative"),gsap.matchMedia().add(`(min-width: ${g}px)`,(()=>{const e=Flip.getState(r);o=gsap.timeline({scrollTrigger:{trigger:i,endTrigger:c,start:s,end:l,scrub:!0}}),o.add(Flip.from(e,{targets:n,scale:p,stagger:{amount:d,from:u}}))})),$("body").removeClass("scrollflip-relative")}r.each((function(e){let t=$(this).attr("data-flip-id");t&&n.filter(`[data-flip-id='${t}']`).attr("data-flip-id",t)})),m(),window.addEventListener("resize",debounce((()=>{m()}),250))}))}function swiperHome(){var e=new Swiper(".swiper-container-home",{slidesPerView:"auto",spaceBetween:0,loop:!0,centeredSlides:!0,autoplay:{delay:500,disableOnInteraction:!1},speed:500,on:{init:function(){this.update(),t(this)},slideChange:function(){t(this)}}});function t(e){const t=e.slides;t.forEach(((t,o)=>{t.style.opacity=o===e.activeIndex?1:.6})),gsap.to(t[e.activeIndex].querySelector(".parallax-bg-img"),{scale:1.1,opacity:1,duration:.5,ease:"power3.out"}),t[e.activeIndex-1]&&gsap.to(t[e.activeIndex-1].querySelector(".parallax-bg-img"),{scale:.5,opacity:.6,duration:.5,ease:"power3.out"}),t[e.activeIndex+1]&&gsap.to(t[e.activeIndex+1].querySelector(".parallax-bg-img"),{scale:.5,opacity:.6,duration:.5,ease:"power3.out"})}new IntersectionObserver((function(t){t.forEach((t=>{t.isIntersecting?e.autoplay.start():e.autoplay.stop()}))}),{threshold:.5}).observe(document.querySelector(".swiper-container-home"))}function createScrollTrigger2(){ScrollTrigger.create({scrub:!0,trigger:".hero-trigger",start:"top 95%",end:"top 85% ",onEnter:()=>{gsap.timeline().to(".usp .word, .h1-usp .word",{opacity:0,x:"-100vw",duration:1,ease:"back.out(1.7)",stagger:{amount:.3}}).to(".heading-container",{x:"50vw",opacity:0,duration:1,ease:"back.out(1.7)"},"<").to(".brand_header",{y:"-10rem",opacity:0,ease:"back.out(1.7)",duration:1},"<")},onLeaveBack:()=>{gsap.timeline().to(".usp .word, .h1-usp .word",{opacity:1,x:0,duration:1,ease:"back.out(1.7)",stagger:{amount:.3}}).to(".heading-container",{opacity:1,x:0,duration:1,ease:"back.out(1.7)"},"<").to(".brand_header",{y:0,opacity:1,ease:"back.out(1.7)",duration:1},"<")}}),ScrollTrigger.create({trigger:".hero-trigger",start:"bottom 35%",end:"bottom center",scrub:!0,toggleActions:"play none none reverse",onEnter:()=>{gsap.timeline().to("#nav",{backdropFilter:"blur(10px)",boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.4)",duration:1,ease:"back.out(1.7)"}).to("#logo-home",{opacity:1,duration:1,ease:"back.out(1.7)"},"<").to(".call, .header",{opacity:0,duration:1,ease:"back.out(1.7)"},"<").to(".cta-contact-nav",{y:0,duration:.5,ease:"back.out(1.7)"},"<")},onLeaveBack:()=>{gsap.timeline().to(".call, .header",{opacity:1,duration:1,ease:"none"},"<").to("#nav",{backdropFilter:"blur(0px)",boxShadow:"none",duration:1,ease:"back.out(1.7)"},"<").to("#logo-home",{opacity:0,duration:1,ease:"back.out(1.7)"},"<").to(".cta-contact-nav",{y:"-5rem",duration:.5,ease:"back.out(1.7)"},"<")}}),ScrollTrigger.refresh()}function setupCecoStrategy(){new SplitType(".ceco-heading",{types:"words",tagName:"span"});let e=gsap.fromTo(".ceco-heading .word",{opacity:0,y:100},{opacity:1,y:0,duration:1,ease:"back.out(1.7)",stagger:{amount:.5}});ScrollTrigger.create({trigger:".connessioni-section",start:"top 30%",end:"bottom bottom",toggleActions:"play none none resume",animation:e});let t=window.innerWidth<768,o=gsap.timeline({scrollTrigger:{trigger:".trigger-ceco",start:"bottom 80%",end:"bottom top",scrub:!0}});o.to(".top-wrapper",{y:"-55vh",duration:1,borderRadius:"5rem"}).to(".ceco-heading",{opacity:0,duration:1},"<").fromTo(".inner-section",{opacity:0},{opacity:1,duration:1},"<"),t?o.to(".bottom-wrapper",{y:"70vh",duration:1,borderRadius:"5rem"},"<"):o.to(".bottom-wrapper",{y:"60vh",duration:1,borderRadius:"5rem"},"<")}function toggleCeco(){let e=null;const t=document.querySelector(".page-wrapper");document.querySelectorAll("#ceco .card-item").forEach((o=>{const a=o.getAttribute("data-ceco"),r=document.querySelector(`.ceco-popup[data-ceco="${a}"]`);if(!r)return void console.error(`Service container for ${a} not found.`);function n(){o.classList.contains("active")||(gsap.to(o.querySelector(".card-item-wrapper"),{borderBottomRightRadius:"1rem",borderBottomLeftRadius:"15rem",duration:.5,ease:"power1.out"}),gsap.to(o.querySelector(".plus-btn-ceco"),{color:"#f2f2f2",rotation:90,scale:1.1,duration:.5,ease:"power1.out"}),gsap.to(o.querySelectorAll(".vector-8, .vector-9"),{strokeWidth:"1.5",duration:.5,ease:"ease.out"}))}function i(){o.classList.contains("active")||(gsap.to(o.querySelector(".card-item-wrapper"),{borderBottomRightRadius:"10rem",borderBottomLeftRadius:"1rem",duration:.5,ease:"power1.out"}),gsap.to(o.querySelector(".plus-btn-ceco"),{color:"",scale:1,rotation:0,duration:.5,ease:"power1.out"}),gsap.to(o.querySelectorAll(".vector-8, .vector-9"),{strokeWidth:"",duration:.5,ease:"ease.out"}))}o.addEventListener("mouseenter",n),o.addEventListener("mouseleave",i),o.addEventListener("touchstart",n),o.addEventListener("touchend",i),o.addEventListener("click",(()=>{const o=r.classList.contains("open");if(e&&e!==r&&(gsap.to(e,{opacity:0,height:0,duration:.5}),e.classList.remove("open"),e=null,gsap.to(t,{opacity:1,duration:.5})),o)gsap.to(r,{opacity:0,height:0,duration:.5}),r.classList.remove("open"),e=null,gsap.to(t,{opacity:1,duration:.5});else{gsap.set(r,{height:"auto"});const o=r.offsetHeight;gsap.fromTo(r,{height:0},{height:o,duration:.5}),gsap.to(r,{opacity:1,duration:.5}),r.classList.add("open"),e=r,gsap.to(t,{opacity:.5,duration:.5})}}));const c=r.querySelector(".popup-close");c?c.addEventListener("click",(()=>{gsap.to(r,{opacity:0,height:0,duration:.5}),r.classList.remove("open"),e=null,gsap.to(t,{opacity:1,duration:.5})})):console.error(`Close button not found in service container for ${a}`)}))}function changeCSSVariablesOnScroll(){const e="transparent",t="#0d0d0d";function o(e){gsap.to(".background-nav",{backgroundColor:e,duration:0,ease:"none"})}ScrollTrigger.create({trigger:".trigger-ceco-2",start:"top+=100vh top",onEnter:()=>o(t),onLeaveBack:()=>o(e)}),ScrollTrigger.create({trigger:".trigger-ceco-2",start:"bottom top",onEnterBack:()=>o(t),onLeave:()=>o(e)})}function animateCecoOnScroll(){ScrollTrigger.create({trigger:".trigger-ceco-2",start:"top+=80vh top",onEnter:function(){gsap.to(".ceco-element",{rotation:"+=360",duration:10,ease:"none",repeat:-1}),gsap.to(".ceco-graphic-item",{rotation:"-=360",duration:10,ease:"none",repeat:-1})},onLeaveBack:()=>{gsap.set(".ceco-element",{rotation:0}),gsap.set(".ceco-graphic-item",{rotation:0}),ScrollTrigger.refresh()}})}function burgerAnimation(e=!1){const t=document.querySelector("#burger"),o=document.querySelector("#burger-mobile"),a=document.querySelector(".brand-navbar");let r=!1;function n(){gsap.to(document.body,{duration:.2,opacity:0,onComplete:function(){gsap.to(window,{scrollTo:{y:0},onComplete:function(){gsap.to(document.body,{duration:.2,opacity:1})}})}})}function i(t,o){const a=gsap.timeline({onComplete:()=>{ScrollTrigger.refresh(),o&&o()}});a.to(".menu-container",{x:"-100vw",opacity:0,duration:.3,ease:"power1.out"}).to("#logo-hidden",{opacity:0,rotateY:90,duration:.5,ease:"power1.out"},"<").to("#logo-home",{opacity:"",rotateY:0,duration:.5,ease:"power1.out"},">").call((()=>changeLogoColor()),null,0).to("#nav",{backgroundColor:"",duration:.5,ease:"linear"},"<").to(".line-middle",{opacity:1,ease:"power1.out"},"<").to(".line-bottom",{y:"0",rotationZ:0,duration:.3,ease:"power1.out"},"<").to(".line-top",{y:"0",rotationZ:0,duration:.3,ease:"power1.out"},"<").to(".menu-wrapper-row",{width:0,duration:.2,ease:"power1.out",stagger:t?.1:.2},"<").set(".cta-contact-nav",{display:"flex"},"<").set(".brand-container",{display:"none"},"<").to(".cta-contact-nav",{rotationX:0,opacity:1,duration:.5,ease:"power1.out"},"<").to(".page-wrapper",{opacity:1},"-=0.6").set(".menu-wrapper",{display:"none"},"-=0.4"),e&&a.to(".background-nav",{opacity:1,duration:0},"-=1"),r=!1}function c(t,o){const a=gsap.timeline({onComplete:()=>{ScrollTrigger.refresh(),o&&o()}});r?i(t,o):(a.set(".menu-wrapper",{display:"flex"}).to(".page-wrapper",{opacity:0},"-=0.5").to(".cta-contact-nav",{rotationX:90,opacity:0,duration:.5,ease:"power1.out"}).set(".brand-container",{display:"flex"}).set(".cta-contact-nav",{display:"none"},"<").to(".menu-wrapper-row",{width:"100%",duration:.2,ease:"power1.out",stagger:.2},"-=0.5").to(".line-top",{y:t?"11px":"14px",duration:.3,ease:"power1.out"},"<").to(".line-bottom",{y:t?"-11px":"-14px",duration:.3,ease:"power1.out"},"<").to(".line-middle",{opacity:0,duration:.2,ease:"power1.out"},"<").to(".line-top",{rotationZ:-45,duration:.2,ease:"power1.out"}).to(".line-bottom",{rotationZ:45,duration:.2,ease:"power1.out"},"<"),e&&a.to(".background-nav",{opacity:0,duration:.5},"-=1"),a.to("#nav",{backgroundColor:"#f2f2f2",duration:.5,ease:"linear"},"-=0.8").to("#logo-home",{opacity:0,rotateY:90,duration:.5,ease:"power1.out"},"<").to("#logo-hidden",{opacity:1,rotateY:0,duration:.5,ease:"power1.out"},">").call((()=>changeLogoColor("","","","#0d0d0d")),null,"-=0.6").to(".menu-container",{x:0,opacity:1,duration:.3,ease:"power1.out"},"-=0.6"),r=!0)}t.addEventListener("click",(()=>c(!1))),o.addEventListener("click",(()=>c(!0))),e&&a.addEventListener("click",(function(){const e=document.querySelector(".menu-wrapper");if(e&&"none"!==getComputedStyle(e).display){i(window.innerWidth<=767,n)}else n()}))}function changeLogoColor(e="",t="",o="",a=""){gsap.to(":root",{"--navlogo-c":e,"--shape-color":t,"--brand-arrow":o,"--brand-call":a,duration:.5,ease:"linear"})}function initializeScrollControlButtons(){const e=document.querySelectorAll("[data-block-scroll]"),t=document.querySelectorAll("[data-unblock-scroll]"),o=document.querySelectorAll("[data-toggle-scroll]"),a=document.querySelectorAll("[data-scroll-container]");let r={top:0,left:0};function n(){r.top=window.scrollY||document.documentElement.scrollTop,r.left=window.scrollX||document.documentElement.scrollLeft}function i(){window.scrollTo(r.left,r.top)}function c(){n(),document.body.classList.add("no-scroll"),a.forEach((e=>{e.classList.add("scrollable")}))}function s(){i(),document.body.classList.remove("no-scroll"),a.forEach((e=>{e.classList.remove("scrollable")}))}function l(){document.body.classList.contains("no-scroll")?(i(),document.body.classList.remove("no-scroll")):(n(),document.body.classList.add("no-scroll"))}e.forEach((e=>{e.addEventListener("click",c)})),t.forEach((e=>{e.addEventListener("click",s)})),o.forEach((e=>{e.addEventListener("click",l)}))}function dataColor(){document.querySelectorAll("[data-color]").forEach((e=>{const t=e.getAttribute("data-color");t?gsap.to(e,{color:t,duration:1,ease:"power1",scrollTrigger:{trigger:e,start:"top 70%",end:"top top",toggleActions:"play none none reverse"}}):console.warn(`Element ${e} does not have a valid data-color attribute.`)}))}function secondSection(e=!1){e&&ScrollTrigger.create({trigger:".hero-spacer",start:"top 20%",end:"top top",onEnter:()=>{gsap.to("#hero",{zIndex:1})}});const t=gsap.matchMedia();t.add("(min-width: 320px) and (max-width: 767px)",(()=>{console.log("Mobile breakpoint active"),gsap.fromTo("#focus",{opacity:1,transformOrigin:"top left"},{x:"10vw",scale:.8,opacity:.5,y:"33%",rotate:90,transformOrigin:"top left",ease:"power1",scrollTrigger:{trigger:".path-section",start:"top 90%",end:"top top",toggleActions:"play none none none"}})})),t.add("(min-width: 768px) and (max-width: 991px)",(()=>{console.log("Tablet breakpoint active"),gsap.fromTo("#focus",{opacity:1,transformOrigin:"top left"},{x:"12vw",opacity:.5,rotate:90,y:"50%",transform:"translateY(-50%)",transformOrigin:"top left",ease:"power1",scrollTrigger:{trigger:".path-section",start:"top 80%",end:"top top",toggleActions:"play none none none"}})})),t.add("(min-width: 992px)",(()=>{console.log("Desktop breakpoint active"),gsap.fromTo("#focus",{opacity:1,transformOrigin:"top left"},{x:"10vw",opacity:.5,rotate:90,y:"50%",transform:"translateY(-50%)",transformOrigin:"top left",ease:"power1",scrollTrigger:{trigger:".path-section",start:"top 80%",end:"top top",toggleActions:"play none none none"}})}));const o=document.querySelectorAll(".path-container"),a=document.querySelectorAll(".img-target");gsap.matchMedia().add("(min-width: 320px) and (max-width: 991px)",(()=>{o.forEach((t=>{const o=t.getAttribute("data-img-id"),r=document.getElementById(o);t.querySelectorAll(".path-vector").forEach((o=>{const a=gsap.timeline({scrollTrigger:{trigger:t,start:"top 70%",end:"top top",toggleActions:"play none none reverse"}});a.from(o,{opacity:0,scale:0,duration:.5,x:-200,ease:"power1.out"}),e&&a.to(o,{rotation:90,x:"-0.6rem",y:"0.6rem",duration:.2,ease:"power1.in"})})),r&&gsap.fromTo(t,{opacity:0},{opacity:1,duration:.5,ease:"power1.out",scrollTrigger:{trigger:t,start:"top 90%",end:"top 10%",toggleActions:"play none none reverse",onEnter:()=>{gsap.to(a,{opacity:0,duration:1,ease:"power1.out"}),gsap.to(r,{opacity:.7,duration:1,ease:"power1.out"})},onLeave:()=>{gsap.to(r,{opacity:0,duration:1,ease:"power1.out"})},onEnterBack:()=>{gsap.to(a,{opacity:0,duration:1,ease:"power1.out"}),gsap.to(r,{opacity:.7,duration:1,ease:"power1.out"})},onLeaveBack:()=>{gsap.to(r,{opacity:0,duration:1,ease:"power1.out"})}}})}))})),gsap.matchMedia().add("(min-width: 992px)",(()=>{o.forEach((t=>{const o=t.getAttribute("data-img-id"),r=document.getElementById(o);t.querySelectorAll(".path-vector").forEach((o=>{const a=gsap.timeline({scrollTrigger:{trigger:t,start:"top 70%",end:"top top",toggleActions:"play none none reverse"}});a.from(o,{opacity:0,scale:0,duration:.5,x:-200,ease:"power1.out"}),e&&a.to(o,{rotation:90,x:"-1rem",y:"1rem",duration:.2,ease:"power1.in"})})),r&&gsap.fromTo(t,{opacity:0},{opacity:1,duration:.5,ease:"power1.out",scrollTrigger:{trigger:t,start:"top 80%",end:"top 20%",toggleActions:"play none none reverse",onEnter:()=>{gsap.to(a,{opacity:0,duration:1,ease:"power1.out"}),gsap.to(r,{opacity:1,duration:1,ease:"power1.out"})},onLeave:()=>{gsap.to(r,{opacity:0,duration:1,ease:"power1.out"})},onEnterBack:()=>{gsap.to(a,{opacity:0,duration:1,ease:"power1.out"}),gsap.to(r,{opacity:1,duration:1,ease:"power1.out"})},onLeaveBack:()=>{gsap.to(r,{opacity:0,duration:1,ease:"power1.out"})}}})}))})),gsap.from(".img-tg-cont",{y:"200",opacity:0,duration:1.5,ease:"linear",scrollTrigger:{trigger:".focus-wrapper",start:"top 20%",end:"top top",toggleActions:"play none none reverse"}})}function initializeHoverAnimations(){document.querySelectorAll(".link-wrapper-menu").forEach((e=>{const t=gsap.timeline({paused:!0});t.fromTo(e.querySelector(".icon-menu-link"),{x:"-15rem",scale:.5,opacity:0},{x:"-0.5rem",scale:1,opacity:1,duration:.4,ease:"back.out(3)"},0),t.to(e.querySelector(".sublink"),{scale:.8,y:5,duration:.5,color:"#f06",transformOrigin:"top left",ease:"power1.out"},0),t.to(e.querySelector(".link-heading"),{rotationZ:3,x:"1rem",y:5,scale:1.2,duration:.3,ease:"power1.out",transformOrigin:"bottom left"},.1);const o=gsap.timeline({paused:!0});o.fromTo(e.querySelector(".icon-menu-link"),{x:"-15rem",scale:.5,opacity:0},{x:"-0.5rem",scale:1,opacity:1,duration:.4,ease:"back.out(3)"},0),o.to(e.querySelector(".sublink"),{scale:.8,y:5,duration:.5,color:"#f06",transformOrigin:"top left",ease:"power1.out"},0),o.to(e.querySelector(".link-heading"),{rotationZ:3,x:"1rem",y:5,scale:1.2,duration:.3,ease:"power1.out",transformOrigin:"bottom left"},0),e.addEventListener("mouseenter",(()=>t.play())),e.addEventListener("mouseleave",(()=>t.reverse())),e.addEventListener("touchstart",(()=>o.play())),e.addEventListener("touchend",(()=>o.reverse()))}))}function initializeSimpleHoverTouchAnimations(){document.querySelectorAll(".link-text-menu").forEach((e=>{const t=gsap.timeline({paused:!0});t.to(e,{rotationZ:10,color:"#f06",duration:.3,ease:"back.out(3)"},0);const o=gsap.timeline({paused:!0});o.to(e,{rotationZ:10,color:"#f06",duration:.3,ease:"back.out(3)"},0),e.addEventListener("mouseenter",(()=>t.play())),e.addEventListener("mouseleave",(()=>t.reverse())),e.addEventListener("touchstart",(()=>o.play())),e.addEventListener("touchend",(()=>o.reverse()))}))}function info(){document.querySelectorAll(".cm-talk-content").forEach((e=>{const t=e.querySelector(".cta-container"),o=e.querySelector(".plus-btn-cta"),a=e.querySelector(".cta-service-btn");let r=!1;function n(){r||(gsap.to(o,{scale:1.5,rotation:90,color:"#f06",duration:.5,ease:"ease.out"}),gsap.to(o.querySelectorAll(".ellipse-47"),{stroke:"transparent",duration:.5,ease:"ease.out"},0))}function i(){r||(gsap.to(o,{rotation:0,scale:1,color:"",duration:.5,ease:"ease.out"}),gsap.to(o.querySelectorAll(".ellipse-47"),{stroke:"",duration:.5,ease:"ease.out"},0))}o.addEventListener("mouseenter",n),o.addEventListener("mouseleave",i),o.addEventListener("touchstart",n),o.addEventListener("touchend",i),a.addEventListener("click",(()=>{if(t.classList.contains("open"))gsap.to(t,{height:0,duration:.5}),gsap.to(o,{scale:1,rotation:0,color:"",duration:.5,ease:"ease.out"}),gsap.to(o.querySelectorAll(".ellipse-47, .vector-9"),{stroke:"",duration:.5,ease:"ease.out"},0),t.classList.remove("open"),r=!1;else{gsap.set(t,{height:"auto"});const e=t.offsetHeight;gsap.fromTo(t,{height:0},{height:e,duration:.5}),gsap.to(o,{scale:1.5,rotation:90,color:"#f06",duration:.5,ease:"ease.out"}),gsap.to(o.querySelectorAll(".ellipse-47, .vector-9"),{stroke:"transparent",duration:.5,ease:"ease.out"},0),t.classList.add("open"),r=!0}}))}))}function ctaAnimations(){document.querySelectorAll(".btn-cta").forEach((e=>{const t=e.querySelector(".button-bg-gradient");if(!t)return void console.error("Element gradientDiv not found.");const o=getComputedStyle(t).getPropertyValue("--background-first").trim(),a=getComputedStyle(t).getPropertyValue("--primary").trim(),r=r=>{const n=gsap.timeline({paused:!0});n.to(t,{backgroundImage:`linear-gradient(to right, ${o}, ${a})`,duration:.8,ease:"linear"},0),n.to(e.querySelector(".button-spacer"),{width:r,duration:.6,ease:"back.out(1.7)"},0),n.to(":root",{"--padding-button":"20",duration:.6,ease:"power2.out"},0),n.to(e.querySelector(".text-cta"),{scale:1.1,duration:.6,ease:"power1.out"},0);const i=()=>n.play(),c=()=>n.reverse();return e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",c),e.addEventListener("touchstart",i),e.addEventListener("touchend",c),n};gsap.matchMedia().add("(min-width: 992px)",(()=>{r("10%")})),gsap.matchMedia().add("(min-width: 320px) and (max-width: 991px)",(()=>{r("0%")})),ScrollTrigger.create({trigger:e,start:"top 95%",end:"bottom 5%",toggleActions:"play none none reverse",onEnter:()=>gsap.to(e,{x:0,duration:.6,ease:"power2.out"})}),gsap.matchMedia().add("(max-width: 992px)",(()=>{const r=gsap.timeline({repeat:-1,paused:!0});r.to(t,{backgroundImage:`linear-gradient(to right, ${a}, ${o})`,duration:1.6,ease:"linear"},0),r.to(t,{backgroundImage:`linear-gradient(to right, ${o}, ${a})`,duration:1.6,ease:"linear"},1.5),r.play();const n=()=>r.pause(),i=()=>r.play();e.addEventListener("touchstart",n),e.addEventListener("touchend",i),e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",i)}))}))}function videoPause(){const e=document.querySelectorAll("div.w-background-video[data-pause-on-scroll]");console.log("Found video containers:",e),e.forEach((e=>{const t=e.querySelector("video");t&&ScrollTrigger.create({trigger:e,start:"top bottom",end:"bottom top",onEnter:()=>{t.play()},onLeave:()=>{t.pause()},onEnterBack:()=>{t.play()},onLeaveBack:()=>{t.pause()}})}))}function toggleFaq(){document.querySelectorAll(".dropdown-container").forEach((e=>{const t=e.querySelector(".p-toggle"),o=e.querySelector(".drop-toggle");e.querySelector(".dropdown-wrapper").addEventListener("click",(()=>{if(t.classList.contains("open"))gsap.to(t,{height:0,duration:.5}),gsap.to(o,{rotation:0,duration:.5,color:"",ease:"ease.out"}),t.classList.remove("open");else{gsap.set(t,{height:"auto"});const e=t.offsetHeight;gsap.fromTo(t,{height:0},{height:e,duration:.5}),gsap.to(o,{rotation:180,duration:.5,color:"#f06",ease:"ease.out"}),t.classList.add("open")}}))}))}function transitionPage(){gsap.timeline().to(".h1-page, .text-block-hero",{opacity:1,x:"0rem",ease:"power2.out"}).to(".cover-page",{x:"0rem",opacity:1,ease:"power2.out"},"<").to("#nav",{y:"0rem",ease:"power2.out"}),$("a:not(.excluded-class)").on("click",(function(e){let t=$(this).attr("href");const o=window.innerWidth<=767?parseInt($(this).attr("data-delay"),10):0;if($(this).prop("hostname")===window.location.host&&!t.includes("#")&&"_blank"!==$(this).attr("target"))if(e.preventDefault(),o)setTimeout((()=>{gsap.timeline({onComplete:()=>window.location.href=t}).fromTo(".page-wrapper, #nav, .menu-wrapper",{xPercent:0},{xPercent:100,opacity:0})}),o);else{gsap.timeline({onComplete:()=>window.location.href=t}).fromTo(".page-wrapper, #nav, .menu-wrapper",{xPercent:0},{xPercent:100,opacity:0})}})),window.onpageshow=function(e){e.persisted&&window.location.reload()}}function navbarRepo(e=!1){const t=document.querySelector("#nav"),o=e?document.querySelector("#navbar-repo"):null,a=document.querySelector(".menu-wrapper");let r=null,n=!1,i=window.innerHeight;const c=gsap.from(t,{yPercent:-100,paused:!0,duration:.2,ease:"ease.out"}).progress(1);function s(){return ScrollTrigger.create({start:"top top",end:"max",onUpdate:e=>{const t=window.innerHeight;if("flex"!==getComputedStyle(a).display)return Math.abs(t-i)>50?(i=t,void(t>i?c.play():c.reverse())):void(-1===e.direction?c.play():c.reverse())}})}function l(){e&&o?ScrollTrigger.create({trigger:o,start:"top 20%",end:"bottom center",onEnter:()=>{n=!0,r||(r=s())},onLeaveBack:()=>{n=!1,r&&(r.kill(),r=null,gsap.set(t,{y:0}))}}):r=s()}window.addEventListener("resize",debounce((()=>{i=window.innerHeight,r&&(r.kill(),r=s()),l()}),200)),l();new MutationObserver((()=>{r&&(r.kill(),r=s())})).observe(a,{attributes:!0,childList:!0,subtree:!0})}function togglePortfolio(){document.querySelectorAll(".case-wrapper").forEach((e=>{const t=e.querySelector(".c-toggle"),o=e.querySelector(".case-toggle");e.querySelector(".case-container").addEventListener("click",(()=>{if(t.classList.contains("open"))gsap.to(t,{height:0,duration:.5}),gsap.to(o,{rotation:0,duration:.5,color:"",ease:"ease.out"}),t.classList.remove("open");else{gsap.set(t,{height:"auto"});const e=t.offsetHeight;gsap.fromTo(t,{height:0},{height:e,duration:.5}),gsap.to(o,{rotation:180,duration:.5,color:"#f06",ease:"ease.out"}),t.classList.add("open")}}))}))}function portfolioInfo(){let e=null,t=null;document.querySelectorAll(".div-content-portfolio").forEach((o=>{o.querySelectorAll(".portfolio-btn-link").forEach((a=>{const r=a.getAttribute("data-btn"),n=o.querySelector(`.btn-link[data-btn="${r}"]`);function i(){a.classList.contains("active")||(gsap.to(a.querySelector(".portfolio-btn"),{rotation:0,scale:1.1,color:"#f06",duration:.5,ease:"ease.out"}),gsap.to(a.querySelector(".text-btn-portfolio"),{color:"#f06",duration:.5,ease:"linear"}))}function c(){a.classList.contains("active")||(gsap.to(a.querySelector(".portfolio-btn"),{scale:1,color:"currentcolor",duration:.5,ease:"ease.out"}),gsap.to(a.querySelector(".text-btn-portfolio"),{color:"currentcolor",duration:.5,ease:"linear"}))}function s(e){e&&(e.classList.remove("active"),gsap.to(e.querySelector(".portfolio-btn"),{rotation:0,scale:1,color:"currentcolor",duration:.5,ease:"ease.out"}),gsap.to(e.querySelector(".text-btn-portfolio"),{color:"currentcolor",duration:.5,ease:"linear"}))}a.addEventListener("mouseenter",i),a.addEventListener("mouseleave",c),a.addEventListener("touchstart",i),a.addEventListener("touchend",c),a.addEventListener("click",(()=>{const o=n.classList.contains("open");if(e&&e!==n&&(gsap.to(e,{height:0,duration:.5}),e.classList.remove("open"),s(t)),o)gsap.to(n,{height:0,duration:.5}),n.classList.remove("open"),s(a),e=null,t=null;else{gsap.set(n,{height:"100%"});const o=n.offsetHeight;gsap.fromTo(n,{height:0},{height:o,duration:.5}),n.classList.add("open"),e=n,t=a,(r=a).classList.add("active"),gsap.to(r.querySelector(".portfolio-btn"),{rotation:90,scale:1.1,color:"#f06",duration:.5,ease:"ease.out"}),gsap.to(r.querySelector(".text-btn-portfolio"),{color:"#f06",duration:.5,ease:"linear"})}var r}))}))}))}function contactSelection(){var e=document.querySelectorAll("[data-contact-target]"),t=document.querySelectorAll(".form-component"),o=document.querySelector(".contact-selection"),a=document.querySelectorAll(".back-selection"),r=document.querySelectorAll(".image-form-cover");e.forEach((function(e){e.addEventListener("click",(function(){var a=e.getAttribute("data-contact-target"),n=document.querySelector('.form-component[data-contact-origin="'+a+'"]'),i=document.querySelector('.image-form-cover[data-contact-target="'+a+'"]');t.forEach((function(e){gsap.to(e,{height:0,duration:.5})})),r.forEach((function(e){gsap.to(e,{opacity:0,duration:.5})})),"selection"!==a&&gsap.to(o,{height:0,duration:.5,onComplete:function(){o.style.display="none"}}),n&&gsap.to(n,{height:"auto",duration:.5,delay:.5}),i&&gsap.to(i,{opacity:.5,duration:.5,delay:.5})}))})),a.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".form-component"),a=e.getAttribute("data-contact-target");if(t&&gsap.to(t,{height:0,duration:.5,onComplete:function(){t.style.height="0"}}),r.forEach((function(e){gsap.to(e,{opacity:0,duration:.5})})),"selection"===a){gsap.set(o,{display:"flex"}),gsap.to(o,{height:"auto",duration:.5,delay:.5});var n=document.querySelector('.image-form-cover[data-contact-target="0"]');n&&gsap.to(n,{opacity:.5,duration:.5,delay:.5})}}))}))}function calendar(){var e,t=document.querySelectorAll(".form-text-field-2"),o=document.getElementById("calendar-modal"),a=document.getElementById("time-selection-modal"),r=document.getElementById("time-selection"),n=document.getElementById("calendar"),i=new FullCalendar.Calendar(n,{initialView:"dayGridMonth",firstDay:1,selectable:!0,headerToolbar:{left:"prev",center:"title",right:"next"},locale:"it",buttonText:{today:"oggi"},dayHeaderFormat:{weekday:"short"},selectAllow:function(e){var t=e.start.getUTCDay();return console.log("Checking if day is selectable:",t),5!==t&&6!==t},events:function(e,t,o){console.log("Fetching events for range: ",e.startStr," to ",e.endStr),fetch("https://us-central1-webflow-project---calltoaction.cloudfunctions.net/getCalendarEvents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeMin:e.startStr,timeMax:e.endStr})}).then((e=>{if(!e.ok)throw console.error("Network response was not ok ",e.statusText),new Error("Network response was not ok "+e.statusText);return e.json()})).then((e=>{console.log("Events fetched from backend: ",e),e.forEach((e=>{e.className="hidden-event"})),t(e)})).catch((e=>{console.error("Error fetching events: ",e),o(e)}))},select:function(e){var t=e.start.getUTCDay();5!==t&&6!==t?(console.log("Date selected: ",e.start),c(e.start)):console.log("Selected day is a weekend, not allowed.")},dateClick:function(e){var t=e.date.getUTCDay();5!==t&&6!==t?(console.log("Date clicked: ",e.date),c(e.date)):console.log("Clicked day is a weekend, not allowed.")},eventOverlap:!1,selectOverlap:function(e){return!e},eventBackgroundColor:"red"});function c(t){var n=t.getUTCDay();if(5!==n&&6!==n){console.log("Opening time selection for date: ",t),r.innerHTML="",a.style.display="block";for(var c=[],s=10;s<=19;s++)c.push({hour:s,minute:0}),c.push({hour:s,minute:30});c.push({hour:20,minute:0}),c.forEach((function(n){var c=new Date(t);if(c.setHours(n.hour,n.minute,0,0),!function(e){for(var t=i.getEvents(),o=0;o<t.length;o++){var a=t[o],r=new Date(a.start),n=new Date(a.end);if(e>=r&&e<n)return!0}return!1}(c)){var s=document.createElement("button");s.innerText=("0"+n.hour).slice(-2)+":"+("0"+n.minute).slice(-2),s.addEventListener("click",(function(){var r=("0"+t.getDate()).slice(-2)+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+t.getFullYear()+" "+s.innerText;console.log("Selected Date: ",r),e.value=r,a.style.display="none",o.style.display="none"})),r.appendChild(s)}}))}else console.log("Day is a weekend, not allowed for time selection.")}i.render(),t.forEach((function(t){t.addEventListener("click",(function(){console.log("Input field clicked: ",t),o.style.display="block",i.updateSize(),e=t}))})),document.addEventListener("click",(function(e){o.contains(e.target)||a.contains(e.target)||e.target.classList.contains("form-text-field-2")||(o.style.display="none",a.style.display="none")}))}document.addEventListener("DOMContentLoaded",(function(){initializeScripts()})),window.onbeforeunload=function(){window.scrollTo(0,0)};